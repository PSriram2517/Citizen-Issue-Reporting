<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin — Settings</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="page" style="max-width:760px">
    <h2>Admin Settings</h2>
    <div class="report-card">
      <p>This page shows non-sensitive configuration for the mail sender. Credentials must be set in the server environment (.env) — do not paste passwords here.</p>
      <div style="margin-top:12px">
        <strong>Configured sender (masked):</strong>
        <div id="sender" style="margin-top:8px;color:var(--muted)">Loading…</div>
      </div>
      <div style="margin-top:14px;color:var(--muted);font-size:13px">
        To enable outgoing confirmation emails using Gmail, set environment variables in your project root .env file:
        <pre style="background:#0a0e17;padding:12px;border-radius:6px;margin-top:8px;border:1px solid #1e293b">GMAIL_USER=your.email@gmail.com
GMAIL_APP_PASSWORD=your-16-char-app-password</pre>
        <strong>Steps to get Gmail App Password:</strong>
        <ol style="margin-top:8px">
          <li>Enable 2-Factor Authentication on your Google Account</li>
          <li>Go to <a href="https://myaccount.google.com/apppasswords" target="_blank" style="color:var(--accent)">myaccount.google.com/apppasswords</a></li>
          <li>Select "Mail" and "Windows Computer" (or your device)</li>
          <li>Copy the 16-character password provided by Google</li>
          <li>Paste it as GMAIL_APP_PASSWORD in .env</li>
        </ol>
        After updating .env, restart the server: <code>node server.js</code>
      </div>
    </div>
  </main>
<script>
fetch('/admin-info').then(r=>r.json()).then(j=>{
  document.getElementById('sender').innerText = j.configured ? j.email : 'Not configured';
}).catch(()=>{document.getElementById('sender').innerText='Error'});
</script>
</body>
</html>